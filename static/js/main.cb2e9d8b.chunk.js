(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(39)},37:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);n(22);var a,i=n(0),s=n.n(i),o=n(11),r=n.n(o),c=n(10),l=n(2),u=n(4),d=n(3),h=n(6),m=n(5),v=n(7),p=n(1),f=function(e){function t(e,n){var a;Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this))).roomDimensions=n,a.grid=void 0,a.cubeGeometry=new p.d(1,1,1),a.cubeMaterial=new p.k,a.name=e;var i=new p.a(16777215,.5);a.add(i);var s=new p.o(16777215,.5);s.position.set(5,5,0),s.lookAt(0,0,0),a.add(s);var o=Math.max(n.width,n.depth);return a.grid=new p.h(o,o,16777215,16777215),a.add(a.grid),a.addCube(),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"dimensions",get:function(){return this.roomDimensions},set:function(e){this.roomDimensions=e,this.remove(this.grid);var t=Math.max(e.width,e.depth);this.grid=new p.h(t,t,16777215,16777215),this.add(this.grid)}}]),Object(d.a)(t,[{key:"addCube",value:function(){var e=new p.i(this.cubeGeometry,this.cubeMaterial);e.position.y+=.5,e.name="New cube",this.add(e)}}]),t}(p.r),b=n(13),y=n.n(b),g=n(17),w=function(){function e(){Object(u.a)(this,e),this.onGamepadConnected=function(e){console.log("Gamepad connected:",e.gamepad)},this.onGamepadDisconnected=function(e){console.log("Gamepad disconnected:",e.gamepad)}}return Object(d.a)(e,[{key:"listen",value:function(){window.addEventListener("gamepadconnected",this.onGamepadConnected),window.addEventListener("gamepaddisconnected",this.onGamepadDisconnected)}},{key:"stop",value:function(){window.removeEventListener("gamepadconnected",this.onGamepadConnected),window.removeEventListener("gamepaddisconnected",this.onGamepadDisconnected)}},{key:"getAxis",value:function(e){var t=navigator.getGamepads(),n=0,a=!0,i=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var c=o.value;if(c&&"standard"===c.mapping)if(e<4){var l=c.axes[e];Math.abs(l)>=.1&&Math.abs(l)>Math.abs(n)&&(n=l)}else if(4===e){var u=c.buttons[6].value,d=c.buttons[7].value-u;Math.abs(d)>Math.abs(n)&&(n=d)}}}catch(h){i=!0,s=h}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}return n}}]),e}(),x=function(){function e(t){var n=this;Object(u.a)(this,e),this.target=void 0,this.keysPressed=new Set,this.lastKeyUp=new Map,this.reset=function(){n.keysPressed.clear()},this.onKeyDown=function(e){e.preventDefault(),Math.abs(e.timeStamp-(n.lastKeyUp.get(e.key)||0))>=100&&n.keysPressed.add(e.key)},this.onKeyUp=function(e){e.preventDefault(),n.keysPressed.delete(e.key),n.lastKeyUp.set(e.key,e.timeStamp)},this.onClick=function(e){2===e.button&&e.shiftKey&&n.reset()},this.target=t}return Object(d.a)(e,[{key:"listen",value:function(){this.target.addEventListener("blur",this.reset),this.target.addEventListener("contextmenu",this.reset),this.target.addEventListener("keydown",this.onKeyDown),this.target.addEventListener("keyup",this.onKeyUp),document.addEventListener("click",this.onClick)}},{key:"stop",value:function(){this.target.removeEventListener("blur",this.reset),this.target.removeEventListener("contextmenu",this.reset),this.target.removeEventListener("keydown",this.onKeyDown),this.target.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("click",this.onClick),this.reset()}},{key:"isPressed",value:function(e){return this.keysPressed.has(e)}}]),e}();!function(e){e[e.AxisX=0]="AxisX",e[e.AxisY=1]="AxisY",e[e.AxisZ=2]="AxisZ",e[e.PlaneYZ=3]="PlaneYZ",e[e.PlaneXZ=4]="PlaneXZ",e[e.PlaneXY=5]="PlaneXY"}(a||(a={}));var j,O=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this))).events=e,n.activeMesh=null,n.objectDragDirection=null,n.isScaling=!1,n.dragOffset=new p.u,n.lastPoint=new p.u,n.plane=new p.m,n.axisX=void 0,n.axisY=void 0,n.axisZ=void 0,n.scaleX=void 0,n.scaleY=void 0,n.scaleZ=void 0,n.planeYZ=void 0,n.planeXZ=void 0,n.planeXY=void 0;var i={transparent:!0,opacity:.75,side:p.f},s=new p.d(.05,.05,.5);n.axisX=new p.i(s,new p.j(Object(l.a)({},i,{color:16711680}))),n.axisX.position.set(.275,0,0),n.axisX.rotation.y=Math.PI/2,n.axisX.userData.direction=a.AxisX,n.axisY=new p.i(s,new p.j(Object(l.a)({},i,{color:65280}))),n.axisY.position.set(0,.275,0),n.axisY.rotation.x=Math.PI/2,n.axisY.userData.direction=a.AxisY,n.axisZ=new p.i(s,new p.j(Object(l.a)({},i,{color:255}))),n.axisZ.position.set(0,0,.275),n.axisZ.userData.direction=a.AxisZ,n.add(n.axisX),n.add(n.axisY),n.add(n.axisZ);var o=new p.s(.05,16,16);n.scaleX=new p.i(o,new p.j(Object(l.a)({},i,{color:16711680}))),n.scaleX.position.set(.65,0,0),n.scaleX.userData.direction=a.AxisX,n.scaleX.userData.isScale=!0,n.scaleY=new p.i(o,new p.j(Object(l.a)({},i,{color:65280}))),n.scaleY.position.set(0,.65,0),n.scaleY.userData.direction=a.AxisY,n.scaleY.userData.isScale=!0,n.scaleZ=new p.i(o,new p.j(Object(l.a)({},i,{color:255}))),n.scaleZ.position.set(0,0,.65),n.scaleZ.userData.direction=a.AxisZ,n.scaleZ.userData.isScale=!0,n.add(n.scaleX),n.add(n.scaleY),n.add(n.scaleZ);var r=new p.n(.25,.25);return n.planeYZ=new p.i(r,new p.j(Object(l.a)({},i,{color:65535}))),n.planeYZ.position.set(0,.25,.25),n.planeYZ.rotation.y=Math.PI/2,n.planeYZ.userData.direction=a.PlaneYZ,n.planeXZ=new p.i(r,new p.j(Object(l.a)({},i,{color:16711935}))),n.planeXZ.position.set(.25,0,.25),n.planeXZ.rotation.x=Math.PI/2,n.planeXZ.userData.direction=a.PlaneXZ,n.planeXY=new p.i(r,new p.j(Object(l.a)({},i,{color:16776960}))),n.planeXY.position.set(.25,.25,0),n.planeXY.userData.direction=a.PlaneXY,n.add(n.planeYZ),n.add(n.planeXZ),n.add(n.planeXY),n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"getControlFromRaycaster",value:function(e){if(!this.activeMesh)return null;this.position.copy(this.activeMesh.position);var t=e.intersectObjects(this.children),n=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var r=s.value,c=r.object;if(c.userData.hasOwnProperty("direction"))return this.dragOffset.copy(r.point).sub(this.activeMesh.position),this.lastPoint.copy(r.point),c}}catch(l){a=!0,i=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"onClick",value:function(e){var t=this.getControlFromRaycaster(e);return!(!t||!t.userData.hasOwnProperty("direction"))&&(this.objectDragDirection=t.userData.direction,this.isScaling=!!t.userData.isScale,this.onMove(e),!0)}},{key:"onMove",value:function(e){var t=e.ray;if(null!==this.objectDragDirection&&this.activeMesh){var n=this.activeMesh.position,i=this.plane,s=null;switch(this.objectDragDirection){case a.AxisX:i.set(new p.u(0,1,0),-n.y),s=new p.m(new p.u(0,0,1),-n.z);break;case a.AxisY:i.set(new p.u(1,0,0),-n.x),s=new p.m(new p.u(0,0,1),-n.z);break;case a.AxisZ:i.set(new p.u(1,0,0),-n.x),s=new p.m(new p.u(0,1,0),-n.y);break;case a.PlaneXY:i.set(new p.u(0,0,1),-n.z);break;case a.PlaneYZ:i.set(new p.u(1,0,0),-n.x);break;case a.PlaneXZ:i.set(new p.u(0,1,0),-n.y)}s&&Math.abs(s.distanceToPoint(t.origin))>Math.abs(i.distanceToPoint(t.origin))&&i.copy(s);var o=t.intersectPlane(i,new p.u);if(o){if(this.isScaling){switch(this.objectDragDirection){case a.AxisX:this.activeMesh.scale.x=Math.min(Math.max(this.activeMesh.scale.x+(o.x-this.lastPoint.x),.1),10);break;case a.AxisY:this.activeMesh.scale.y=Math.min(Math.max(this.activeMesh.scale.y+(o.y-this.lastPoint.y),.1),10);break;case a.AxisZ:this.activeMesh.scale.z=Math.min(Math.max(this.activeMesh.scale.z+(o.z-this.lastPoint.z),.1),10)}this.events.onScale(this.activeMesh.scale)}else{switch(o.sub(this.dragOffset),this.objectDragDirection){case a.AxisX:this.activeMesh.position.x=o.x;break;case a.AxisY:this.activeMesh.position.y=o.y;break;case a.AxisZ:this.activeMesh.position.z=o.z;break;default:this.activeMesh.position.copy(o)}this.events.onTranslate(this.activeMesh.position)}this.lastPoint.copy(o)}}}}]),t}(p.r);!function(e){e[e.Primary=0]="Primary",e[e.Middle=1]="Middle",e[e.Secondary=2]="Secondary"}(j||(j={}));var k={x:new p.u(1,0,0),y:new p.u(0,1,0),z:new p.u(0,0,1)},A=function(){function e(t,n){var a=this;Object(u.a)(this,e),this.room=t,this.events=n,this.target=null,this.rafHandle=0,this.previousTimestamp=0,this.audioContext=new AudioContext,this.listener=new p.b,this.controls=new O({onTranslate:this.events.onTranslate,onScale:this.events.onScale}),this.camera=new p.l(75,1,.1,1e3),this.renderer=new p.v,this.canvas=void 0,this.outlineMesh=new p.i,this.raycaster=new p.q,this.keys=new x(this.renderer.domElement),this.gamepads=new w,this.isDraggingCamera=!1,this.resize=function(){if(a.target){var e=a.target,t=e.offsetWidth,n=e.offsetHeight;a.camera.aspect=t/n,a.camera.updateProjectionMatrix(),a.renderer.setPixelRatio(window.devicePixelRatio),a.renderer.setSize(t,n)}},this.animate=function(e){a.rafHandle=window.requestAnimationFrame(a.animate);var t=(e-a.previousTimestamp)/1e3;a.previousTimestamp=e,a.update(t),a.renderer.clear(),a.renderer.render(a.room,a.camera),a.controls.activeMesh&&(a.controls.position.copy(a.controls.activeMesh.position),a.renderer.clearDepth(),a.renderer.render(a.controls,a.camera))},this.onClick=function(e){},this.onMouseDown=function(e){e.button===j.Secondary&&(a.isDraggingCamera=!0,a.canvas.requestPointerLock()),e.button===j.Primary&&(a.updateRaycaster(e),a.controls.onClick(a.raycaster)?a.canvas.style.cursor="grabbing":a.checkSceneClick(a.raycaster))},this.onMouseUp=function(e){e.button===j.Secondary&&a.isDraggingCamera&&(a.isDraggingCamera=!1,document.exitPointerLock()),e.button===j.Primary&&null!==a.controls.objectDragDirection&&(a.controls.objectDragDirection=null,a.controls.getControlFromRaycaster(a.raycaster)?a.canvas.style.cursor="grab":a.canvas.style.cursor=null)},this.onMouseMove=function(e){a.isDraggingCamera?(e.movementX&&a.camera.rotateOnWorldAxis(k.y,-e.movementX/100),e.movementY&&a.camera.rotateOnAxis(k.x,-e.movementY/100)):(a.updateRaycaster(e),null!==a.controls.objectDragDirection?a.controls.onMove(a.raycaster):a.controls.getControlFromRaycaster(a.raycaster)?a.canvas.style.cursor="grab":a.canvas.style.cursor=null)},this.onWheel=function(e){e.preventDefault();var t=e.deltaY;0===e.deltaMode&&(t/=15),a.camera.translateZ(t/10)},this.renderer.autoClear=!1,this.renderer.setClearColor(new p.e(1649238)),this.canvas=this.renderer.domElement,this.canvas.tabIndex=-1,this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mouseup",this.onMouseUp),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1},!0),this.camera.position.z=3,this.camera.position.y=3,this.camera.lookAt(new p.u(0,.5,0));var i=new p.j({color:16777215,side:p.c});this.outlineMesh.material=i,this.outlineMesh.scale.multiplyScalar(1.05),this.camera.add(this.listener)}return Object(d.a)(e,[{key:"attach",value:function(e){this.keys.listen(),this.gamepads.listen(),this.target=e,e.appendChild(this.canvas),this.resize(),window.requestAnimationFrame(this.animate),window.addEventListener("resize",this.resize),this.canvas.focus()}},{key:"detach",value:function(){window.cancelAnimationFrame(this.rafHandle),window.removeEventListener("resize",this.resize),this.target&&(this.target.removeChild(this.canvas),this.target=null),this.keys.stop(),this.gamepads.stop()}},{key:"selectMesh",value:function(e){this.controls.activeMesh&&this.controls.activeMesh.remove(this.outlineMesh),e&&(this.outlineMesh.geometry=e.geometry,e.add(this.outlineMesh)),this.controls.activeMesh=e,this.events.onSelect(e)}},{key:"addAudioToActiveMesh",value:function(){var e=Object(g.a)(y.a.mark(function e(t){var n,a,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.controls.activeMesh){e.next=2;break}return e.abrupt("return");case 2:return(n=this.controls.activeMesh.getObjectByName("audio"))&&(this.controls.activeMesh.remove(n),n.stop()),e.next=6,this.audioContext.decodeAudioData(t);case 6:a=e.sent,(i=new p.p(this.listener)).name="audio",i.setBuffer(a),i.setLoop(!0),i.play(),this.controls.activeMesh.add(i),console.log("Successfully added new audio to selected mesh");case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(e){this.keys.isPressed("w")&&this.camera.translateOnAxis(k.z,-2*e),this.keys.isPressed("s")&&this.camera.translateOnAxis(k.z,2*e),this.keys.isPressed("a")&&this.camera.translateOnAxis(k.x,-2*e),this.keys.isPressed("d")&&this.camera.translateOnAxis(k.x,2*e),this.keys.isPressed(" ")&&(this.camera.position.y+=2*e),this.keys.isPressed("Shift")&&(this.camera.position.y-=2*e),this.keys.isPressed("ArrowLeft")&&this.camera.rotateOnWorldAxis(k.y,e),this.keys.isPressed("ArrowRight")&&this.camera.rotateOnWorldAxis(k.y,-e),this.keys.isPressed("ArrowUp")&&this.camera.rotateOnAxis(k.x,e),this.keys.isPressed("ArrowDown")&&this.camera.rotateOnAxis(k.x,-e);var t=this.gamepads.getAxis(0),n=this.gamepads.getAxis(1),a=this.gamepads.getAxis(2),i=this.gamepads.getAxis(3),s=this.gamepads.getAxis(4);t&&this.camera.translateOnAxis(k.x,2*e*t),n&&this.camera.translateOnAxis(k.z,2*e*n),s&&this.camera.translateOnAxis(k.y,2*e*s),a&&this.camera.rotateOnWorldAxis(k.y,-e*a),i&&this.camera.rotateOnAxis(k.x,-e*i)}},{key:"checkSceneClick",value:function(e){var t=e.intersectObjects(this.room.children),n=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var r=s.value.object;if(r.isMesh)return this.selectMesh(r),!0}}catch(c){a=!0,i=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return this.selectMesh(null),!1}},{key:"updateRaycaster",value:function(e){var t=this.renderer.getSize(new p.t),n=(e.pageX-this.canvas.offsetLeft)/t.x*2-1,a=-(e.pageY-this.canvas.offsetTop)/t.y*2+1;this.raycaster.setFromCamera({x:n,y:a},this.camera)}}]),e}(),M=n(8),C=n(9);function E(){var e=Object(M.a)(["\n  display: block;\n  appearance: none;\n  background: #2c3e50;\n  border-radius: 3px;\n  border: 2px solid #2c3e50;\n  color: #fff;\n  width: 100%;\n  padding: 10px 12px;\n  margin: 5px 0;\n\n  transition: 0.2s ease border-color;\n  :focus {\n    outline: none;\n    border-color: #3498db;\n  }\n"]);return E=function(){return e},e}function D(){var e=Object(M.a)(["\n  margin: 20px 0;\n"]);return D=function(){return e},e}function P(){var e=Object(M.a)(["\n  flex: 1;\n  height: 100%;\n"]);return P=function(){return e},e}function S(){var e=Object(M.a)(["\n  width: 250px;\n  height: 100%;\n  background: #34495e;\n  color: #fff;\n  padding: 10px 15px;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]);return S=function(){return e},e}function Y(){var e=Object(M.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #000;\n  display: flex;\n"]);return Y=function(){return e},e}var X=C.a.div(Y()),Z=C.a.aside(S()),z=C.a.main(P()),R=C.a.div(D()),L=C.a.input(E()),T=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).onAudioFileSelected=function(e){var t=e.currentTarget.files;if(t){var a=t.item(0);if(a)if(console.log("Selected file:",a),a.size>5242880)console.log("File too big, aborting");else{var i=new FileReader;i.onload=function(){i.result?n.props.onUpdateAudio(i.result):console.error("Failed reading file:",e)},i.readAsArrayBuffer(a)}}},n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.object,n=e.onUpdateName,a=e.onUpdatePosition,i=e.onUpdateRotation,o=e.onUpdateScale;return s.a.createElement("div",null,s.a.createElement(R,null,s.a.createElement("label",null,"Name"),s.a.createElement(L,{type:"text",value:t.name,onChange:function(e){return n(e.currentTarget.value)}})),s.a.createElement(R,null,s.a.createElement("label",null,"Position (x, y, z)"),s.a.createElement(L,{type:"number",step:"any",value:t.position.x,onChange:function(e){return a(e.currentTarget.valueAsNumber,t.position.y,t.position.z)}}),s.a.createElement(L,{type:"number",step:"any",value:t.position.y,onChange:function(e){return a(t.position.x,e.currentTarget.valueAsNumber,t.position.z)}}),s.a.createElement(L,{type:"number",step:"any",value:t.position.z,onChange:function(e){return a(t.position.x,t.position.y,e.currentTarget.valueAsNumber)}})),s.a.createElement(R,null,s.a.createElement("label",null,"Euler-Rotation (x, y, z)"),s.a.createElement(L,{type:"number",step:"any",value:t.rotation.x,onChange:function(e){return i(e.currentTarget.valueAsNumber,t.rotation.y,t.rotation.z)}}),s.a.createElement(L,{type:"number",step:"any",value:t.rotation.y,onChange:function(e){return i(t.rotation.x,e.currentTarget.valueAsNumber,t.rotation.z)}}),s.a.createElement(L,{type:"number",step:"any",value:t.rotation.z,onChange:function(e){return i(t.rotation.x,t.rotation.y,e.currentTarget.valueAsNumber)}})),s.a.createElement(R,null,s.a.createElement("label",null,"Size (width, height, depth)"),s.a.createElement(L,{type:"number",step:"any",min:.1,max:10,value:t.scale.x,onChange:function(e){return o(e.currentTarget.valueAsNumber,t.scale.y,t.scale.z)}}),s.a.createElement(L,{type:"number",step:"any",min:.1,max:10,value:t.scale.y,onChange:function(e){return o(t.scale.x,e.currentTarget.valueAsNumber,t.scale.z)}}),s.a.createElement(L,{type:"number",step:"any",min:.1,max:10,value:t.scale.z,onChange:function(e){return o(t.scale.x,t.scale.y,e.currentTarget.valueAsNumber)}})),s.a.createElement(R,null,s.a.createElement("label",null,"Audio source (file)"),s.a.createElement(L,{type:"file",accept:"audio/*",onChange:this.onAudioFileSelected})))}}]),t}(s.a.Component),N=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.room,n=e.onUpdateName,a=e.onUpdateDimensions;return s.a.createElement("div",null,s.a.createElement(R,null,s.a.createElement("label",null,"Name"),s.a.createElement(L,{type:"text",value:t.name,onChange:function(e){return n(e.currentTarget.value)}})),s.a.createElement(R,null,s.a.createElement("label",null,"Dimensions (width, depth, height)"),s.a.createElement(L,{type:"number",step:1,min:5,max:50,value:t.dimensions.width,onChange:function(e){return a(Object(l.a)({},t.dimensions,{width:e.currentTarget.valueAsNumber}))}}),s.a.createElement(L,{type:"number",step:1,min:5,max:50,value:t.dimensions.depth,onChange:function(e){return a(Object(l.a)({},t.dimensions,{depth:e.currentTarget.valueAsNumber}))}}),s.a.createElement(L,{type:"number",step:1,min:3,max:50,value:t.dimensions.height,onChange:function(e){return a(Object(l.a)({},t.dimensions,{height:e.currentTarget.valueAsNumber}))}})))}}]),t}(s.a.Component),U=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).rooms=[new f("First room",{width:15,depth:10,height:3})],n.sceneCanvas=new A(n.rooms[0],{onSelect:function(e){e?n.setState({selectedObject:{id:e.id,name:e.name,position:e.position,scale:e.scale,rotation:e.rotation}}):n.setState({selectedObject:null})},onTranslate:function(e){n.setState(function(t){var n=t.selectedObject;return{selectedObject:n&&Object(l.a)({},n,{position:e})}})},onScale:function(e){n.setState(function(t){var n=t.selectedObject;return{selectedObject:n&&Object(l.a)({},n,{size:{width:e.x,height:e.y,depth:e.z}})}})}}),n.state={rooms:n.rooms.map(function(e){return{id:e.id,name:e.name,dimensions:e.dimensions}}),selectedRoomId:0,selectedObject:null},n.mainRef=s.a.createRef(),n.updateRoomName=function(e){n.sceneCanvas.room.name=e,n.setState(function(t){var n=t.rooms,a=t.selectedRoomId;return{rooms:[].concat(Object(c.a)(n.slice(0,a)),[Object(l.a)({},n[a],{name:e})],Object(c.a)(n.slice(a+1)))}})},n.updateRoomDimensions=function(e){n.sceneCanvas.room.dimensions=e,n.setState(function(t){var n=t.rooms,a=t.selectedRoomId;return{rooms:[].concat(Object(c.a)(n.slice(0,a)),[Object(l.a)({},n[a],{dimensions:e})],Object(c.a)(n.slice(a+1)))}})},n.updateName=function(e){n.sceneCanvas.controls.activeMesh&&(n.sceneCanvas.controls.activeMesh.name=e),n.setState(function(t){var n=t.selectedObject;return{selectedObject:n&&Object(l.a)({},n,{name:e})}})},n.updateScale=function(e,t,a){n.sceneCanvas.controls.activeMesh&&n.sceneCanvas.controls.activeMesh.scale.set(e,t,a),n.setState(function(n){var i=n.selectedObject;return{selectedObject:i&&Object(l.a)({},i,{scale:new p.u(e,t,a)})}})},n.updatePosition=function(e,t,a){n.sceneCanvas.controls.activeMesh&&n.sceneCanvas.controls.activeMesh.position.set(e,t,a),n.setState(function(n){var i=n.selectedObject;return{selectedObject:i&&Object(l.a)({},i,{position:new p.u(e,t,a)})}})},n.updateRotation=function(e,t,a){n.sceneCanvas.controls.activeMesh&&n.sceneCanvas.controls.activeMesh.rotation.set(e,t,a),n.setState(function(n){var i=n.selectedObject;return{selectedObject:i&&Object(l.a)({},i,{rotation:new p.g(e,t,a)})}})},n.updateAudio=function(e){n.sceneCanvas.addAudioToActiveMesh(e)},n.onAddRoomClick=function(){var e=new f("New room",{width:10,depth:10,height:3});n.rooms.push(e),n.sceneCanvas.selectMesh(null),n.sceneCanvas.room=e,n.setState(function(t){return{rooms:[].concat(Object(c.a)(t.rooms),[{id:e.id,name:e.name,dimensions:e.dimensions}]),selectedRoomId:t.rooms.length}})},n.onAddCubeClick=function(){n.sceneCanvas.room.addCube()},n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.mainRef.current&&this.sceneCanvas.attach(this.mainRef.current)}},{key:"componentWillUnmount",value:function(){this.sceneCanvas.detach()}},{key:"selectRoom",value:function(e){this.sceneCanvas.selectMesh(null),this.sceneCanvas.room=this.rooms[e],this.setState({selectedRoomId:e,selectedObject:null})}},{key:"render",value:function(){var e=this,t=this.state.selectedObject;return s.a.createElement(X,null,s.a.createElement(Z,null,s.a.createElement("p",null,"Sidebar"),s.a.createElement("div",null,s.a.createElement("button",{onClick:this.onAddRoomClick},"Add room"),s.a.createElement("button",{onClick:this.onAddCubeClick},"Add cube")),s.a.createElement("ol",null,this.state.rooms.map(function(t,n){return s.a.createElement("li",{key:t.id,onClick:function(){return e.selectRoom(n)},style:{cursor:"pointer"}},t.name)})),!t&&s.a.createElement(N,{room:this.state.rooms[this.state.selectedRoomId],onUpdateName:this.updateRoomName,onUpdateDimensions:this.updateRoomDimensions}),t&&s.a.createElement(T,{object:t,onUpdateName:this.updateName,onUpdatePosition:this.updatePosition,onUpdateRotation:this.updateRotation,onUpdateScale:this.updateScale,onUpdateAudio:this.updateAudio})),s.a.createElement(z,{ref:this.mainRef}))}}]),t}(s.a.Component);n(37),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=window;!F.AudioContext&&F.webkitAudioContext&&(F.AudioContext=F.webkitAudioContext),r.a.render(s.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.cb2e9d8b.chunk.js.map