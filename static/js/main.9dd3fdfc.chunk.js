(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);n(18);var s,i=n(0),a=n.n(i),r=n(4),o=n.n(r),c=n(2),h=n(3),d=n(14),u=n(11),l=n(15),m=n(5),v=n(6),f=n(1),w=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;Object(c.a)(this,e),this.target=n,this.keysPressed=new Set,this.reset=function(){t.keysPressed.clear()},this.onKeyDown=function(e){e.preventDefault(),t.keysPressed.add(e.key)},this.onKeyUp=function(e){e.preventDefault(),t.keysPressed.delete(e.key)},this.onClick=function(e){2===e.button&&e.shiftKey&&t.reset()}}return Object(h.a)(e,[{key:"listen",value:function(){this.target.addEventListener("blur",this.reset),this.target.addEventListener("contextmenu",this.reset),this.target.addEventListener("keydown",this.onKeyDown),this.target.addEventListener("keyup",this.onKeyUp),this.target.addEventListener("click",this.onClick)}},{key:"stop",value:function(){this.target.removeEventListener("blur",this.reset),this.target.removeEventListener("contextmenu",this.reset),this.target.removeEventListener("keydown",this.onKeyDown),this.target.removeEventListener("keyup",this.onKeyUp),this.target.removeEventListener("click",this.onClick),this.reset()}},{key:"isPressed",value:function(e){return this.keysPressed.has(e)}}]),e}();!function(e){e[e.Primary=0]="Primary",e[e.Middle=1]="Middle",e[e.Secondary=2]="Secondary"}(s||(s={}));var k={up:new f.k(0,1,0),down:new f.k(0,-1,0),left:new f.k(-1,0,0),right:new f.k(1,0,0),forwards:new f.k(0,0,-1),backwards:new f.k(0,0,1)},g=function(e,t,n){return new f.k(n*Math.sin(e/t*2*Math.PI),.5,n*Math.cos(e/t*2*Math.PI))},y=function(){function e(){var t=this;Object(c.a)(this,e),this.target=null,this.rafHandle=0,this.previousTimestamp=0,this.activeMesh=null,this.scene=new f.i,this.camera=new f.g(75,1,.1,1e3),this.renderer=new f.l,this.canvas=void 0,this.grid=new f.c(10,10),this.smallCube=new f.d,this.outlineMesh=new f.d,this.keys=new w,this.isDraggingCamera=!1,this.resize=function(){if(t.target){var e=t.target,n=e.offsetWidth,s=e.offsetHeight;t.camera.aspect=n/s,t.camera.updateProjectionMatrix(),t.renderer.setSize(n,s)}},this.animate=function(e){t.rafHandle=window.requestAnimationFrame(t.animate);var n=(e-t.previousTimestamp)/1e3;t.previousTimestamp=e,t.smallCube.rotation.x+=.01,t.smallCube.rotation.y+=.01,t.smallCube.position.copy(g(e,1e4,2)),t.keys.isPressed("w")&&t.camera.translateOnAxis(k.forwards,2*n),t.keys.isPressed("s")&&t.camera.translateOnAxis(k.backwards,2*n),t.keys.isPressed("a")&&t.camera.translateOnAxis(k.left,2*n),t.keys.isPressed("d")&&t.camera.translateOnAxis(k.right,2*n),t.keys.isPressed(" ")&&(t.camera.position.y+=2*n),t.keys.isPressed("Shift")&&(t.camera.position.y-=2*n),t.keys.isPressed("ArrowLeft")&&t.camera.rotateOnWorldAxis(new f.k(0,1,0),n),t.keys.isPressed("ArrowRight")&&t.camera.rotateOnWorldAxis(new f.k(0,-1,0),n),t.keys.isPressed("ArrowUp")&&t.camera.rotateOnAxis(new f.k(1,0,0),n),t.keys.isPressed("ArrowDown")&&t.camera.rotateOnAxis(new f.k(-1,0,0),n),t.renderer.render(t.scene,t.camera)},this.onClick=function(e){if(e.button===s.Primary){var n=t.renderer.getSize(new f.j),i=(e.pageX-t.canvas.offsetLeft)/n.x*2-1,a=-(e.pageY-t.canvas.offsetTop)/n.y*2+1;console.log(n,i,a);var r=new f.h;r.setFromCamera({x:i,y:a},t.camera);var o=r.intersectObjects(t.scene.children,!0);t.activeMesh&&(t.activeMesh.remove(t.outlineMesh),t.activeMesh=null);for(var c=0;c<o.length&&!t.activeMesh;c++)o[c].object!==t.grid&&(t.activeMesh=o[c].object,t.outlineMesh.geometry=t.activeMesh.geometry,t.activeMesh.add(t.outlineMesh))}},this.onWheel=function(e){e.preventDefault();var n=e.deltaY;0===e.deltaMode&&(n/=15),t.camera.translateZ(n)},this.onMouseDown=function(e){e.button===s.Secondary&&(t.isDraggingCamera=!0,t.canvas.requestPointerLock())},this.onMouseUp=function(e){e.button===s.Secondary&&t.isDraggingCamera&&(document.exitPointerLock(),t.isDraggingCamera=!1)},this.onMouseMove=function(e){t.isDraggingCamera&&(e.movementX&&t.camera.rotateOnWorldAxis(new f.k(0,-1,0),e.movementX/100),e.movementY&&t.camera.rotateOnAxis(new f.k(-1,0,0),e.movementY/100))},this.canvas=this.renderer.domElement,this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mouseup",this.onMouseUp),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1},!0);var n=new f.b(1,1,1),i=new f.f,a=new f.d(n,i);a.position.y+=.5,this.smallCube.geometry=new f.b(.25,.25,.25),this.smallCube.material=i,this.scene.add(a),this.scene.add(this.smallCube),this.scene.add(this.grid),this.camera.position.x=-2,this.camera.position.y=2,this.camera.position.z=3,this.camera.lookAt(this.scene.position);var r=new f.e({color:65280,side:f.a});this.outlineMesh.material=r,this.outlineMesh.scale.multiplyScalar(1.05),console.log(this.scene.toJSON())}return Object(h.a)(e,[{key:"attach",value:function(e){this.keys.listen(),this.target=e,e.appendChild(this.canvas),this.resize(),this.animate(0),window.addEventListener("resize",this.resize)}},{key:"detach",value:function(){window.cancelAnimationFrame(this.rafHandle),window.removeEventListener("resize",this.resize),this.keys.stop(),this.target&&(this.target.removeChild(this.canvas),this.target=null)}}]),e}();function p(){var e=Object(m.a)(["\n  flex: 1;\n  height: 100%;\n"]);return p=function(){return e},e}function b(){var e=Object(m.a)(["\n  width: 250px;\n  height: 100%;\n  background: #666;\n"]);return b=function(){return e},e}function M(){var e=Object(m.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #000;\n  display: flex;\n"]);return M=function(){return e},e}var P=v.a.div(M()),C=v.a.aside(b()),E=v.a.main(p()),O=function(e){function t(){var e,n;Object(c.a)(this,t);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).mainRef=a.a.createRef(),n.sceneCanvas=new y,n}return Object(l.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.sceneCanvas.attach(this.mainRef.current)}},{key:"componentWillUnmount",value:function(){this.sceneCanvas.detach()}},{key:"render",value:function(){return a.a.createElement(P,null,a.a.createElement(C,null,"Sidebar"),a.a.createElement(E,{ref:this.mainRef}))}}]),t}(a.a.Component);n(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.9dd3fdfc.chunk.js.map