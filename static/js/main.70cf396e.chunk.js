(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,n,t){e.exports=t(33)},31:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);t(18);var r,a=t(0),o=t.n(a),i=t(6),s=t.n(i),c=t(2),u=t(3),l=t(8),d=t(7),m=t(9),h=t(4),f=t(5),w=t(1),g=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;Object(c.a)(this,e),this.target=t,this.keysPressed=new Set,this.onKeyDown=function(e){e.preventDefault(),n.keysPressed.add(e.key)},this.onKeyUp=function(e){e.preventDefault(),n.keysPressed.delete(e.key)}}return Object(u.a)(e,[{key:"listen",value:function(){this.target.addEventListener("keydown",this.onKeyDown),this.target.addEventListener("keyup",this.onKeyUp)}},{key:"stop",value:function(){this.target.removeEventListener("keydown",this.onKeyDown),this.target.removeEventListener("keyup",this.onKeyUp)}},{key:"isPressed",value:function(e){return this.keysPressed.has(e)}}]),e}();function y(){var e=Object(h.a)(["\n  width: 100%;\n  height: 100%;\n"]);return y=function(){return e},e}!function(e){e[e.Primary=0]="Primary",e[e.Middle=1]="Middle",e[e.Secondary=2]="Secondary"}(r||(r={}));var k={up:new w.k(0,1,0),down:new w.k(0,-1,0),left:new w.k(-1,0,0),right:new w.k(1,0,0),forwards:new w.k(0,0,-1),backwards:new w.k(0,0,1)},v=function(e,n,t){return new w.k(t*Math.sin(e/n*2*Math.PI),.5,t*Math.cos(e/n*2*Math.PI))},p=f.a.div(y()),b=function(e){function n(e){var t;Object(c.a)(this,n),(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).containerRef=a.createRef(),t.rafHandle=0,t.previousTimestamp=0,t.target=null,t.scene=new w.i,t.camera=new w.g(75,1,.1,1e3),t.renderer=new w.l,t.grid=new w.c(10,10),t.smallCube=new w.d,t.outlineMesh=new w.d,t.keys=new g,t.isDraggingCamera=!1,t.resize=function(){if(t.containerRef.current){var e=t.containerRef.current,n=e.offsetWidth,r=e.offsetHeight;t.camera.aspect=n/r,t.camera.updateProjectionMatrix(),t.renderer.setSize(n,r)}},t.animate=function(e){t.rafHandle=window.requestAnimationFrame(t.animate);var n=(e-t.previousTimestamp)/1e3;t.previousTimestamp=e,t.smallCube.rotation.x+=.01,t.smallCube.rotation.y+=.01,t.smallCube.position.copy(v(e,1e4,2)),t.keys.isPressed("w")&&t.camera.translateOnAxis(k.forwards,2*n),t.keys.isPressed("s")&&t.camera.translateOnAxis(k.backwards,2*n),t.keys.isPressed("a")&&t.camera.translateOnAxis(k.left,2*n),t.keys.isPressed("d")&&t.camera.translateOnAxis(k.right,2*n),t.keys.isPressed(" ")&&(t.camera.position.y+=2*n),t.keys.isPressed("Shift")&&(t.camera.position.y-=2*n),t.keys.isPressed("ArrowLeft")&&t.camera.rotateOnWorldAxis(new w.k(0,1,0),n),t.keys.isPressed("ArrowRight")&&t.camera.rotateOnWorldAxis(new w.k(0,-1,0),n),t.keys.isPressed("ArrowUp")&&t.camera.rotateOnAxis(new w.k(1,0,0),n),t.keys.isPressed("ArrowDown")&&t.camera.rotateOnAxis(new w.k(-1,0,0),n),t.renderer.render(t.scene,t.camera)},t.onClick=function(e){if(e.button===r.Primary){var n=t.renderer.getSize(new w.j),a=(e.pageX-e.currentTarget.offsetLeft)/n.x*2-1,o=-(e.pageY-e.currentTarget.offsetTop)/n.y*2+1;console.log(n,a,o);var i=new w.h;i.setFromCamera({x:a,y:o},t.camera);var s=i.intersectObjects(t.scene.children,!0);t.target&&(t.target.remove(t.outlineMesh),t.target=null);for(var c=0;c<s.length&&!t.target;c++)s[c].object!==t.grid&&(t.target=s[c].object,t.outlineMesh.geometry=t.target.geometry,t.target.add(t.outlineMesh))}},t.onWheel=function(e){e.preventDefault();var n=e.deltaY;0===e.deltaMode&&(n/=15),t.camera.translateZ(n)},t.onMouseDown=function(e){e.button===r.Secondary&&(t.isDraggingCamera=!0,t.containerRef.current.requestPointerLock())},t.onMouseUp=function(e){e.button===r.Secondary&&t.isDraggingCamera&&(document.exitPointerLock(),t.isDraggingCamera=!1)},t.onMouseMove=function(e){t.isDraggingCamera&&(e.movementX&&t.camera.rotateOnWorldAxis(new w.k(0,-1,0),e.movementX/100),e.movementY&&t.camera.rotateOnAxis(new w.k(-1,0,0),e.movementY/100))};var o=new w.b(1,1,1),i=new w.f,s=new w.d(o,i);s.position.y+=.5,t.smallCube.geometry=new w.b(.25,.25,.25),t.smallCube.material=i,t.scene.add(s),t.scene.add(t.smallCube),t.scene.add(t.grid),t.camera.position.x=-2,t.camera.position.y=2,t.camera.position.z=3,t.camera.lookAt(t.scene.position);var u=new w.e({color:65280,side:w.a});return t.outlineMesh.material=u,t.outlineMesh.scale.multiplyScalar(1.05),console.log(t.scene.toJSON()),t}return Object(m.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){this.keys.listen(),this.containerRef.current.appendChild(this.renderer.domElement),this.containerRef.current.focus(),this.resize(),this.animate(0),window.addEventListener("resize",this.resize)}},{key:"componentWillUnmount",value:function(){this.keys.stop(),window.cancelAnimationFrame(this.rafHandle),window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){return a.createElement(p,{tabIndex:-1,ref:this.containerRef,onClick:this.onClick,onWheel:this.onWheel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,onContextMenu:function(e){return e.preventDefault()}})}}]),n}(a.Component);function M(){var e=Object(h.a)(["\n  flex: 1;\n  height: 100%;\n"]);return M=function(){return e},e}function O(){var e=Object(h.a)(["\n  width: 250px;\n  height: 100%;\n  background: #666;\n"]);return O=function(){return e},e}function P(){var e=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #000;\n  display: flex;\n"]);return P=function(){return e},e}var x=f.a.div(P()),j=f.a.aside(O()),C=f.a.main(M()),A=function(e){function n(){return Object(c.a)(this,n),Object(l.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement(x,null,o.a.createElement(j,null,"Sidebar"),o.a.createElement(C,null,o.a.createElement(b,null)))}}]),n}(o.a.Component);t(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.70cf396e.chunk.js.map