(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);n(18);var i,a,s=n(1),r=n.n(s),o=n(4),c=n.n(o),l=n(2),h=n(3),d=n(14),u=n(11),v=n(15),m=n(5),f=n(6),w=n(0),y=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;Object(l.a)(this,e),this.target=n,this.keysPressed=new Set,this.reset=function(){t.keysPressed.clear()},this.onKeyDown=function(e){e.preventDefault(),t.keysPressed.add(e.key)},this.onKeyUp=function(e){e.preventDefault(),t.keysPressed.delete(e.key)},this.onClick=function(e){2===e.button&&e.shiftKey&&t.reset()}}return Object(h.a)(e,[{key:"listen",value:function(){this.target.addEventListener("blur",this.reset),this.target.addEventListener("contextmenu",this.reset),this.target.addEventListener("keydown",this.onKeyDown),this.target.addEventListener("keyup",this.onKeyUp),this.target.addEventListener("click",this.onClick)}},{key:"stop",value:function(){this.target.removeEventListener("blur",this.reset),this.target.removeEventListener("contextmenu",this.reset),this.target.removeEventListener("keydown",this.onKeyDown),this.target.removeEventListener("keyup",this.onKeyUp),this.target.removeEventListener("click",this.onClick),this.reset()}},{key:"isPressed",value:function(e){return this.keysPressed.has(e)}}]),e}();!function(e){e[e.Primary=0]="Primary",e[e.Middle=1]="Middle",e[e.Secondary=2]="Secondary"}(i||(i={})),function(e){e[e.AxisX=0]="AxisX",e[e.AxisY=1]="AxisY",e[e.AxisZ=2]="AxisZ",e[e.PlaneYZ=3]="PlaneYZ",e[e.PlaneXZ=4]="PlaneXZ",e[e.PlaneXY=5]="PlaneXY"}(a||(a={}));var g={up:new w.o(0,1,0),down:new w.o(0,-1,0),left:new w.o(-1,0,0),right:new w.o(1,0,0),forwards:new w.o(0,0,-1),backwards:new w.o(0,0,1)},p=function(){function e(t){var n=this;Object(l.a)(this,e),this.options=t,this.target=null,this.rafHandle=0,this.previousTimestamp=0,this.activeMesh=null,this.scene=new w.m,this.controlsScene=new w.m,this.camera=new w.i(75,1,.1,1e3),this.renderer=new w.p,this.canvas=void 0,this.grid=new w.d(10,10),this.smallCube=new w.f,this.outlineMesh=new w.f,this.arrows=new w.e,this.keys=new y,this.isDraggingCamera=!1,this.objectDragDirection=null,this.resize=function(){if(n.target){var e=n.target,t=e.offsetWidth,i=e.offsetHeight;n.camera.aspect=t/i,n.camera.updateProjectionMatrix(),n.renderer.setSize(t,i)}},this.animate=function(e){n.rafHandle=window.requestAnimationFrame(n.animate);var t=(e-n.previousTimestamp)/1e3;n.previousTimestamp=e,n.smallCube.rotation.x+=.01,n.smallCube.rotation.y+=.01,n.keys.isPressed("w")&&n.camera.translateOnAxis(g.forwards,2*t),n.keys.isPressed("s")&&n.camera.translateOnAxis(g.backwards,2*t),n.keys.isPressed("a")&&n.camera.translateOnAxis(g.left,2*t),n.keys.isPressed("d")&&n.camera.translateOnAxis(g.right,2*t),n.keys.isPressed(" ")&&(n.camera.position.y+=2*t),n.keys.isPressed("Shift")&&(n.camera.position.y-=2*t),n.keys.isPressed("ArrowLeft")&&n.camera.rotateOnWorldAxis(new w.o(0,1,0),t),n.keys.isPressed("ArrowRight")&&n.camera.rotateOnWorldAxis(new w.o(0,-1,0),t),n.keys.isPressed("ArrowUp")&&n.camera.rotateOnAxis(new w.o(1,0,0),t),n.keys.isPressed("ArrowDown")&&n.camera.rotateOnAxis(new w.o(-1,0,0),t),n.renderer.clear(),n.renderer.render(n.scene,n.camera),n.activeMesh&&(n.controlsScene.position.copy(n.activeMesh.position),n.renderer.clearDepth(),n.renderer.render(n.controlsScene,n.camera))},this.onClick=function(e){},this.onMouseDown=function(e){if(e.button===i.Secondary&&(n.isDraggingCamera=!0,n.canvas.requestPointerLock()),e.button===i.Primary){var t=n.renderer.getSize(new w.n),a=(e.pageX-n.canvas.offsetLeft)/t.x*2-1,s=-(e.pageY-n.canvas.offsetTop)/t.y*2+1,r=new w.l;r.setFromCamera({x:a,y:s},n.camera),n.checkControlsClick(r)||n.checkSceneClick(r)}},this.onMouseUp=function(e){e.button===i.Secondary&&n.isDraggingCamera&&(n.isDraggingCamera=!1),e.button===i.Primary&&null!==n.objectDragDirection&&(n.objectDragDirection=null),n.isDraggingCamera||null!==n.objectDragDirection||document.exitPointerLock()},this.onMouseMove=function(e){if(n.isDraggingCamera&&(e.movementX&&n.camera.rotateOnWorldAxis(new w.o(0,-1,0),e.movementX/100),e.movementY&&n.camera.rotateOnAxis(new w.o(-1,0,0),e.movementY/100)),null!==n.objectDragDirection&&n.activeMesh){var t=new w.k;n.camera.getWorldQuaternion(t);var i=new w.o(e.movementX,-e.movementY,0);switch(i.applyQuaternion(t),i.divideScalar(100),n.objectDragDirection){case a.AxisX:i.y=i.z=0;break;case a.AxisY:i.x=i.z=0;break;case a.AxisZ:i.x=i.y=0;break;case a.PlaneYZ:i.x=0;break;case a.PlaneXZ:i.y=0;break;case a.PlaneXY:i.z=0}n.activeMesh.position.add(i)}},this.onWheel=function(e){e.preventDefault();var t=e.deltaY;0===e.deltaMode&&(t/=15),n.camera.translateZ(t)},this.renderer.autoClear=!1,this.canvas=this.renderer.domElement,this.canvas.addEventListener("click",this.onClick),this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mouseup",this.onMouseUp),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("wheel",this.onWheel),this.canvas.addEventListener("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1},!0);var s=new w.b(.05,.05,.5),r=new w.f(s,new w.g({color:16711680}));r.position.set(.25,0,0),r.rotation.y=Math.PI/2,r.userData.direction=a.AxisX;var o=new w.f(s,new w.g({color:65280}));o.position.set(0,.25,0),o.rotation.x=Math.PI/2,o.userData.direction=a.AxisY;var c=new w.f(s,new w.g({color:255}));c.position.set(0,0,.25),c.userData.direction=a.AxisZ;var h=new w.j(.25,.25),d=new w.f(h,new w.g({color:65535,side:w.c}));d.position.set(0,.25,.25),d.rotation.y=Math.PI/2,d.userData.direction=a.PlaneYZ;var u=new w.f(h,new w.g({color:16711935,side:w.c}));u.position.set(.25,0,.25),u.rotation.x=Math.PI/2,u.userData.direction=a.PlaneXZ;var v=new w.f(h,new w.g({color:16776960,side:w.c}));v.position.set(.25,.25,0),v.userData.direction=a.PlaneXY,this.controlsScene.add(r),this.controlsScene.add(o),this.controlsScene.add(c),this.controlsScene.add(d),this.controlsScene.add(u),this.controlsScene.add(v);var m=new w.b(1,1,1),f=new w.h,p=new w.f(m,f);p.position.y+=.5,this.smallCube.geometry=new w.b(.25,.25,.25),this.smallCube.material=f,this.smallCube.translateX(2),this.scene.add(p),this.scene.add(this.smallCube),this.scene.add(this.grid),this.camera.position.z=3,this.camera.position.y=3,this.camera.lookAt(p.position);var k=new w.g({color:16777215,side:w.a});this.outlineMesh.material=k,this.outlineMesh.scale.multiplyScalar(1.05),console.log(this.scene.toJSON())}return Object(h.a)(e,[{key:"attach",value:function(e){this.keys.listen(),this.target=e,e.appendChild(this.canvas),this.resize(),window.requestAnimationFrame(this.animate),window.addEventListener("resize",this.resize)}},{key:"detach",value:function(){window.cancelAnimationFrame(this.rafHandle),window.removeEventListener("resize",this.resize),this.keys.stop(),this.target&&(this.target.removeChild(this.canvas),this.target=null)}},{key:"checkControlsClick",value:function(e){var t=e.intersectObjects(this.controlsScene.children),n=!0,i=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var o=s.value.object;if(o.userData.hasOwnProperty("direction"))return console.log("Drag object:",o.userData.direction),this.objectDragDirection=o.userData.direction,this.canvas.requestPointerLock(),!0}}catch(c){i=!0,a=c}finally{try{n||null==r.return||r.return()}finally{if(i)throw a}}return!1}},{key:"checkSceneClick",value:function(e){this.activeMesh&&(this.activeMesh.remove(this.outlineMesh),this.activeMesh=null);var t=e.intersectObjects(this.scene.children),n=!0,i=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var o=s.value.object;if(o.isMesh)return this.activeMesh=o,this.outlineMesh.geometry=this.activeMesh.geometry,this.activeMesh.add(this.outlineMesh),this.options.onSelect(o),!0}}catch(c){i=!0,a=c}finally{try{n||null==r.return||r.return()}finally{if(i)throw a}}return this.options.onSelect(null),!1}}]),e}();function k(){var e=Object(m.a)(["\n  flex: 1;\n  height: 100%;\n"]);return k=function(){return e},e}function b(){var e=Object(m.a)(["\n  width: 250px;\n  height: 100%;\n  background: #34495e;\n  color: #fff;\n  padding: 10px 15px;\n"]);return b=function(){return e},e}function x(){var e=Object(m.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background: #000;\n  display: flex;\n"]);return x=function(){return e},e}var D=f.a.div(x()),P=f.a.aside(b()),M=f.a.main(k()),C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={selectedObject:null},n.mainRef=r.a.createRef(),n.sceneCanvas=new p({onSelect:function(e){n.setState({selectedObject:e})}}),n}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.sceneCanvas.attach(this.mainRef.current)}},{key:"componentWillUnmount",value:function(){this.sceneCanvas.detach()}},{key:"render",value:function(){var e=this.state.selectedObject;return r.a.createElement(D,null,r.a.createElement(P,null,r.a.createElement("p",null,"Sidebar"),e&&r.a.createElement("p",null,"Selected object: ",e.uuid)),r.a.createElement(M,{ref:this.mainRef}))}}]),t}(r.a.Component);n(31),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.4a6b05b6.chunk.js.map